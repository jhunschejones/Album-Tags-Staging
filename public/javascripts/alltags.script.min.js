function safeParse(content){return content=content.replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/\//g,"&#47;").replace(/\\/g,"&#92;").replace(/\(/g,"&#40;").replace(/\)/,"&#41;").replace(/\./g,"&#46;").replace(/\[/g,"&#91;").replace(/\]/g,"&#93;").replace(/\{/g,"&#123;").replace(/\}/g,"&#125;").replace(/\=/g,"&#61;")}function replaceBackSlashWithHtml(str){return str.replace(/\//g,"&sol;")}var allTags=[];function populateTags(){$.getJSON("/api/v1/album",function(albums){albums&&($(".all_tags").text(""),albums.forEach(albumObject=>{let tags;albumObject.tags.forEach(tag=>{-1==allTags.indexOf(tag)&&allTags.push(tag)})}),allTags.sort(),allTags.forEach(tag=>{if(parseInt(tag))var addLetters="tag_",tagName="tag_".concat(tag).replace(/[^A-Z0-9]+/gi,"");else var tagName=tag.replace(/[^A-Z0-9]+/gi,"");$(".all_tags").append(`<a href="" onclick="changeClass(${tagName}, event)" id="${tagName}" class="badge badge-light tag">${safeParse(tag)}</a>  `)}))})}function changeClass(tagName,event){event&&event.preventDefault(),$(".warning_label").text("");var thisTag=document.getElementById(tagName.id);thisTag.classList.toggle("badge-primary"),thisTag.classList.toggle("selected_tag"),thisTag.classList.toggle("badge-light"),addToTagArray(replaceBackSlashWithHtml(thisTag.innerHTML))}var selectedTags=[];function addToTagArray(tag){if(-1===$.inArray(tag,selectedTags))selectedTags.push(tag);else{let index=selectedTags.indexOf(tag);selectedTags.splice(index,1)}}function clearTagArray(event){event&&event.preventDefault(),$(".selected_tag").length>0?($(".selected_tag").toggleClass("badge-primary"),$(".selected_tag").toggleClass("badge-light"),$(".selected_tag").toggleClass("selected_tag"),selectedTags=[]):$(".warning_label").text("")}function tagSearch(event){if(event&&event.preventDefault(),selectedTags.length>0)var win=window.location=`/search/tags/${selectedTags}`;else $(".warning_label").text(""),$(".warning_label").text("Select one or more tags to preform a tag-search.")}populateTags();