function removeByID(arr,ID){return arr.filter(function(ele){return ele._id!=ID})}let allLists;function getAllLists(){$.ajax({method:"GET",url:"/api/v1/list/user/"+userID,success:function(data){allLists=data,$("#loader").hide(),populateAllLists()}})}function removeList(listID){let thisList=allLists.find(x=>x._id===listID),confirmed;confirm(`Are you sure you want to delete your list "${thisList.title}"? You cannot undo this operation.`)&&$.ajax({method:"DELETE",url:"/api/v1/list/"+listID,success:function(){allLists=removeByID(allLists,listID),populateAllLists()}})}function populateAllLists(){$("#no-lists-message").hide(),$("#all-lists").html(""),allLists.length>0?(allLists.forEach(list=>{let listCreator=list.displayName;""===listCreator.trim&&(listCreator="Unknown"),$("#all-lists").append(`<li class="list"><a href="/list/${list._id}">${list.title}</a><span class="text-secondary"> by: ${listCreator}</span><span class="list-delete-button" data-list-id="${list._id}" data-toggle="tooltip" data-placement="right" title="Delete this list" data-trigger="hover">&#10005;</span></li>`)}),$(".list-delete-button").on("click",function(){removeList($(this).attr("data-list-id"))})):$("#no-lists-message").show()}const config={apiKey:"AIzaSyAoadL6l7wVMmMcjqqa09_ayEC8zwnTyrc",authDomain:"album-tags-v1d1.firebaseapp.com",projectId:"album-tags-v1d1"},defaultApp=firebase.initializeApp(config);let userID;function logIn(){firebase.auth().setPersistence(firebase.auth.Auth.Persistence.LOCAL).then(function(){var provider=new firebase.auth.GoogleAuthProvider;return firebase.auth().signInWithPopup(provider)}).then(function(result){userID=user.uid,getAllLists(),$("#login-message").hide(),$("#page-title").show(),$("#full_menu_login_logout_container").show(),$("#login_button").hide(),$("#full_menu_login_button").hide(),$("#logout_button").show(),$("#full_menu_logout_button").show()}).catch(function(error){})}function logOut(){firebase.auth().signOut().then(function(){$("#full_menu_login_logout_container").show(),$("#login_button").show(),$("#full_menu_login_button").show(),$("#logout_button").hide(),$("#full_menu_logout_button").hide(),$("#login-message").show(),$("#page-title").hide()}).catch(function(error){})}firebase.auth().onAuthStateChanged(function(user){user?(userID=firebase.auth().currentUser.uid,getAllLists(),$("#full_menu_login_logout_container").show(),$("#login_button").hide(),$("#full_menu_login_button").hide(),$("#logout_button").show(),$("#full_menu_logout_button").show(),$("#page-title").show(),$("#login-message").hide()):($("#full_menu_login_logout_container").show(),$("#login_button").show(),$("#full_menu_login_button").show(),$("#logout_button").hide(),$("#full_menu_logout_button").hide(),$("#loader").hide(),$("#login-message").show(),$("#page-title").hide())});const loginButton=document.getElementById("login_button"),loginButton2=document.getElementById("full_menu_login_button"),logoutButton=document.getElementById("logout_button"),logoutButton2=document.getElementById("full_menu_logout_button");loginButton.addEventListener("click",logIn),loginButton2.addEventListener("click",logIn),logoutButton.addEventListener("click",logOut),logoutButton2.addEventListener("click",logOut),$(".login_button").on("click",logIn);