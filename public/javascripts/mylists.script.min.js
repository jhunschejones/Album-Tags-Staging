var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,b,c){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var f=a[e];if(b.call(c,f,e,a))return{i:e,v:f}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6","es3");function removeByID(a,b){return a.filter(function(a){return a._id!=b})}var allLists;
function getAllLists(){$.ajax({method:"GET",url:"/api/v1/list/user/"+userID,success:function(a){allLists=a;$("#loader").hide();populateAllLists()}})}function removeList(a){var b=allLists.find(function(b){return b._id===a});confirm('Are you sure you want to delete your list "'+b.title+'"? You cannot undo this operation.')&&$.ajax({method:"DELETE",url:"/api/v1/list/"+a,success:function(){allLists=removeByID(allLists,a);populateAllLists()}})}
function populateAllLists(){$("#no-lists-message").hide();$("#all-lists").html("");0<allLists.length?(allLists.forEach(function(a){var b=a.displayName;""===b.trim&&(b="Unknown");$("#all-lists").append('<li class="list"><a href="/list/'+a._id+'">'+a.title+'</a><span class="text-secondary"> by: '+b+'</span><span class="list-delete-button" data-list-id="'+a._id+'" data-toggle="tooltip" data-placement="right" title="Delete this list" data-trigger="hover">&#10005;</span></li>')}),$(".list-delete-button").on("click",
function(){removeList($(this).attr("data-list-id"))})):$("#no-lists-message").show()}var config={apiKey:"AIzaSyAoadL6l7wVMmMcjqqa09_ayEC8zwnTyrc",authDomain:"album-tags-v1d1.firebaseapp.com",projectId:"album-tags-v1d1"},defaultApp=firebase.initializeApp(config);
firebase.auth().onAuthStateChanged(function(a){a?(userID=firebase.auth().currentUser.uid,getAllLists(),$("#full_menu_login_logout_container").show(),$("#login_button").hide(),$("#full_menu_login_button").hide(),$("#logout_button").show(),$("#full_menu_logout_button").show(),$("#page-title").show(),$("#login-message").hide(),$("#all-lists").show()):($("#full_menu_login_logout_container").show(),$("#login_button").show(),$("#full_menu_login_button").show(),$("#logout_button").hide(),$("#full_menu_logout_button").hide(),
$("#loader").hide(),$("#login-message").show(),$("#page-title").hide(),$("#all-lists").hide())});var userID;
function logIn(){firebase.auth().setPersistence(firebase.auth.Auth.Persistence.LOCAL).then(function(){var a=new firebase.auth.GoogleAuthProvider;return firebase.auth().signInWithPopup(a)}).then(function(a){userID=user.uid;getAllLists();$("#login-message").hide();$("#page-title").show();$("#all-lists").show();$("#full_menu_login_logout_container").show();$("#login_button").hide();$("#full_menu_login_button").hide();$("#logout_button").show();$("#full_menu_logout_button").show()}).catch(function(a){})}
function logOut(){firebase.auth().signOut().then(function(){$("#full_menu_login_logout_container").show();$("#login_button").show();$("#full_menu_login_button").show();$("#logout_button").hide();$("#full_menu_logout_button").hide();$("#login-message").show();$("#page-title").hide();$("#all-lists").hide()}).catch(function(a){})}
var loginButton=document.getElementById("login_button"),loginButton2=document.getElementById("full_menu_login_button"),logoutButton=document.getElementById("logout_button"),logoutButton2=document.getElementById("full_menu_logout_button");loginButton.addEventListener("click",logIn);loginButton2.addEventListener("click",logIn);logoutButton.addEventListener("click",logOut);logoutButton2.addEventListener("click",logOut);$(".login_button").on("click",logIn);
