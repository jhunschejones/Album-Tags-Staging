function safeParse(a){return a=a.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\//g,"&#47;").replace(/\\/g,"&#92;").replace(/\(/g,"&#40;").replace(/\)/,"&#41;").replace(/\./g,"&#46;").replace(/\[/g,"&#91;").replace(/\]/g,"&#93;").replace(/\{/g,"&#123;").replace(/\}/g,"&#125;").replace(/=/g,"&#61;")}var selectedTags=$(".heres_the_selected_tags").text().split(","),cleanSelectedTags=[];selectedTags.forEach(function(a){a=a.trim();cleanSelectedTags.push(a)});
function populateTags(){cleanSelectedTags.forEach(function(a){$(".tags_searched").append('<span class="badge badge-primary tag">'+safeParse(a)+"</span>  ")})}
function getTagedAlbums(){$.getJSON("/api/v1/album/matchingtags/"+cleanSelectedTags).then(function(a){a.message?$(".album_results").html("<p class='text-danger'>There are no albums that match this combination of tags.</p>"):a.forEach(function(a){$.getJSON("/api/v1/album/albumid/"+a.appleAlbumID,function(a){$(".album_results").append(a.title+' <span class="text-secondary font-italic">'+a.artist+", "+a.releaseDate.slice(0,4)+'</span> : <a href="/album/'+a.appleAlbumID+'">Album Details</a> <br>')})})})}
populateTags();getTagedAlbums();
