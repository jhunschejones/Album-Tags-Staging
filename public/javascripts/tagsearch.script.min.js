function safeParse(content){return content=content.replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/\//g,"&#47;").replace(/\\/g,"&#92;").replace(/\(/g,"&#40;").replace(/\)/,"&#41;").replace(/\./g,"&#46;").replace(/\[/g,"&#91;").replace(/\]/g,"&#93;").replace(/\{/g,"&#123;").replace(/\}/g,"&#125;").replace(/\=/g,"&#61;")}var selectedTags=$(".heres_the_selected_tags").text().split(","),cleanSelectedTags=[];function populateTags(){cleanSelectedTags.forEach(tagElement=>{$(".tags_searched").append(`<span class="badge badge-primary tag">${safeParse(tagElement)}</span>  `)})}function getTagedAlbums(){$.getJSON("/api/v1/album/matchingtags/"+cleanSelectedTags).then(function(allMatchingAlbums){allMatchingAlbums.message?$(".album_results").html("<p class='text-danger'>There are no albums that match this combination of tags.</p>"):allMatchingAlbums.forEach(matchingAlbum=>{$.getJSON("/api/v1/album/albumid/"+matchingAlbum.appleAlbumID,function(album){$(".album_results").append(`${album.title} <span class="text-secondary font-italic">${album.artist}, ${album.releaseDate.slice(0,4)}</span> : <a href="/album/${album.appleAlbumID}">Album Details</a> <br>`)})})})}selectedTags.forEach(element=>{element=element.trim(),cleanSelectedTags.push(element)}),populateTags(),getTagedAlbums();